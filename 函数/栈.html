<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>
		<script type="text/javascript">
			function stack() {
				this.datastore = []; //数组 dataStore 保存栈内元素
				this.top = 0; //栈顶位置，被构造函数初始化为 0
				this.push = push;
				this.pop = pop;
				this.peek = peek;
				this.length = length;
				this.clear = clear;
			}
			//push() 方法。当向栈中压入一个新元素时，需要将其保存在数组中变量 top 所对 应的位置，然后将 top 值加 1，让其指向数组中下一个空位置。 ++ 操作符的位置，它放在 this.top 的后面，这样新入栈的元素就被放在 top 的当前值对应的位置，然后再将变量 top 的值加 1，指向下一个位置。
			function push(element) {
				this.datastore[this.top++] = element;
			}

			//push()返回栈顶元素，同时将变量 top 的值减 1:
			function pop() {
				return this.datastore[--this.top];
			}

			function peek() {
				return this.datastore[this.top - 1];
			}

			function length() {
				return this.top;
			}

			function clear() {
				return this.top = 0;
			}

			//test
			var s = new stack();
			s.push('aa');
			s.push('bb');
			s.push('cc');
			console.log('length:' + s.length());
			console.log(s.peek())

			var poped = s.pop();
			console.log('the popped element is : ' + poped); //访问后，永久的删除了
			console.log(s.peek());
			console.log(s.length()); //2
			s.push('dd');
			console.log(s.peek());
			s.clear();
			console.log('length:' + s.length());
			console.log(s.peek());
			s.push('ee');
			console.log(s.peek());
			/*  length:3
				cc
				the popped element is : cc
				bb
				dd
				length:0
				undefined
				ee
				*/

			//将数字转换为二进制和八进制
			function mul() {
				var s = new stack();
				do {
					s.push(num % base);
					num = Math.floor(num /= base);
				} while (num > 0);
				var converted = '';
				while(s.length() > 0) {
					converted += s.pop()
				}
				return converted;
			}
			var num = 32;
			var base = 2;
			var newnum = mul(num, base);
			console.log(num + 'converted to base ' + base + 'is' + newnum);
			num = 125;
			base = 8;
			var newNum = mul(num, base);
			console.log(num + " converted to base " + base + " is " + newNum);
			//判断给定字符串是否是回文
			function ispalind(word) {
				var s = new stack();
				for(var i = 0; i < word.length; ++i) {
					s.push(word[i]);
				}
				var rword = '';
				while(s.length() > 0) {
					rword += s.pop();
				}
				if(word == rword) {
					return true;
				} else {
					return false;
				}
			}
			var word = 'hello';
			if(ispalind(word)) {
				console.log('yes' + word);
			} else {
				console.log('no' + word);
			}
			word = "racecar"
			if(ispalind(word)) {
				console.log('yes' + word);
			} else {
				console.log('no' + word)
			}

			//递归, 5 的阶乘
			function abc(num) {
				if(num === 0) {
					return 1;
				} else {
					return num * abc(num - 1)
				}
			}
			abc(5);
			//栈，递归
			//使用栈来模拟计算 5! 的过程，首先将数字从 5 到 1 压入栈，然后使用一个循环，将数字挨个弹出连乘，就得到了正确的答案:120。例 4-5 包含了该函数和测试程序的代码。
			function fact(n) {
				var s = new stack();
				while(n > 1) {
					s.push(n--);
				}
				var product = 1;
				while(s.length() > 0) {
					product *= s.pop()
				}
				return product;
			}
			fact(5)
		</script>
	</body>

</html>